{% extends "partials/base.html" %}
{% load static %}
{% block title %}Variable Lists{% endblock title %}

{% block extra_css %}
{% endblock extra_css %}
{% block content %}
        <!-- ============================================================== --> 
        <!-- Start right Content here -->
        <!-- ============================================================== -->
        <div class="main-content">

            <div class="page-content">
                <div class="container-fluid">
                    {% block pagetitle %}
                    {% include "partials/page-title.html" with pagetitle="Jobs" title="Variable Lists" %}
                    {% endblock pagetitle %}

                    <div class="row">
                        <div class="col-lg-12">
                            <div class="card">
                                <div class="card-body">
                                    <div class="d-flex align-items-center">
                                        <h6 class="card-title mb-0 flex-grow-1">Search Variables</h6>
                                        <div class="flex-shrink-0">
                                            <button class="btn btn-primary" data-bs-toggle="modal" data-bs-target="#CreateVariableModal"><i class="ri-add-line align-bottom me-1"></i> Create New Variable</button>
                                        </div>
                                    </div>  

                                    <div class="row mt-3 gy-3">
                                        <div class="col-xxl-10 col-md-6">
                                            <div class="search-box">
                                                <input type="text" class="form-control search bg-light border-light" id="searchJob" autocomplete="off" placeholder="Search for variables" >
                                                <i class="ri-search-line search-icon"></i>
                                            </div>
                                        </div>
                                        <div class="col-xl-12 d-none" id="found-job-alert">
                                            <div class="alert alert-success mb-0 text-center" role="alert">
                                                <strong id="total-result">253</strong> jobs found
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                    

                    <div class="row">
                        <div class="col-xxl-9">
                            {% comment %} <div id="job-list">
                            </div> {% endcomment %}

                            {% for variable in variables %}
                            <div class="card joblist-card">
                                <div class="card-body">
                                    <div class="d-flex mb-4">
                                        <div class="avatar-sm">
                                            <div class="avatar-title bg-light rounded">
                                                <img src="'+ datas[i].companyLogo + '" alt="" class="avatar-xxs companyLogo-img">
                                            </div>
                                        </div>
                                        <div class="ms-3 flex-grow-1">
                                            <img src="'+ datas[i].coverImg + '" alt="" class="d-none cover-img">
                                            <a href="#!"><h5 class="job-title">{{variable.name}}</h5></a>
                                            <p class="company-name text-muted mb-0">{{variable.fk1.name}}</p>
                                        </div>
                                        <div>
                                            <button type="button" class="btn btn-ghost-primary btn-icon custom-toggle" data-bs-toggle="button">
                                                <span class="icon-on"><i class="ri-bookmark-line"></i></span>
                                                <span class="icon-off"><i class="ri-bookmark-fill"></i></span>
                                            </button>
                                        </div>
                                    </div>
                                    <p class="text-muted job-description">{{variable.description}}</p>
                                    {% comment %} <div>'+ tagHtml + '</div> {% endcomment %}
                                </div>
                                <div class="card-footer border-top-dashed">
                                    <div class="d-flex justify-content-between align-items-center flex-wrap gap-3">\
                                        <div><i class="ri-briefcase-2-line align-bottom me-1"></i> <span class="job-type">{{variable.type}}</span></div>
                                        <div class="d-none"><span class="job-experience">'+ datas[i].experience + '</span></div>
                                        <div><i class="ri-map-pin-2-line align-bottom me-1"></i>  <span class="job-location">'+ datas[i].location + '</span></div>
                                        <div><i class="ri-user-3-line align-bottom me-1"></i> '+ datas[i].applied + '</div>
                                        <div><i class="ri-time-line align-bottom me-1"></i> <span class="job-postdate">{{variable.createdDate}}</span></div>
                                        
                                        <div class="dropdown">
                                            <button
                                                class="btn btn-link text-muted p-1 mt-n2 py-0 text-decoration-none fs-15"
                                                data-bs-toggle="dropdown" aria-haspopup="true"
                                                aria-expanded="true">
                                                <i data-feather="more-horizontal" class="icon-sm"></i>
                                            </button>

                                            <div class="dropdown-menu dropdown-menu-end">
                                                <a class="dropdown-item"
                                                    href="{% url 'apps:variables.overview' variable.id %}"><i
                                                        class="ri-eye-fill align-bottom me-2 text-muted"></i>
                                                    View</a>
                                                <a class="dropdown-item" href="{% url 'apps:variables.edit' %}"><i
                                                        class="ri-pencil-fill align-bottom me-2 text-muted"></i>
                                                    Edit</a>
                                                <div class="dropdown-divider"></div>
                                                <a class="dropdown-item" href="#" data-bs-toggle="modal"
                                                    data-bs-target="#removeProductModal"><i
                                                        class="ri-delete-bin-fill align-bottom me-2 text-muted"></i>
                                                    Remove</a>
                                            </div>
                                        </div>
                                    </div>\
                                </div>\
                            </div>
                            {% comment %} End card {% endcomment %}
                            {% empty %}
                            <div class="text-center py-4">
                                <lord-icon src="https://cdn.lordicon.com/msoeawqm.json" trigger="loop" colors="primary:#405189,secondary:#0ab39c" style="width:75px;height:75px"></lord-icon>
                                <h5 class="mt-2">Sorry there isn't any variable register in the database</h5>
                                <p class="text-muted mb-0">You have to "Add Product".</p>
                            </div>

                            {% endfor %}
                            {% comment %} Fin de la lista {% endcomment %}

                            <div class="row g-0 justify-content-end mb-4" id="pagination-element">
                                <!-- end col -->
                                <div class="col-sm-6">
                                    <div class="pagination-block pagination pagination-separated justify-content-center justify-content-sm-end mb-sm-0">
                                        <div class="page-item">
                                            <a href="javascript:void(0);" class="page-link" id="page-prev">Previous</a>
                                        </div>
                                        <span id="page-num" class="pagination"></span>
                                        <div class="page-item">
                                            <a href="javascript:void(0);" class="page-link" id="page-next">Next</a>
                                        </div>
                                    </div>
                                </div><!-- end col -->
                            </div>
                            <!-- end row -->

                        </div><!--end col-->
                        <div class="col-xxl-3">
                            <div class="card job-list-view-card overflow-hidden" id="job-overview">
                                <img src="{% static 'images/small/img-10.jpg' %}" alt="" id="cover-img" class="img-fluid background object-fit-cover">
                                <div class="card-body">
                                    <div class="avatar-md mt-n5">
                                        <div class="avatar-title bg-light rounded-circle">
                                            <img src="{% static 'images/companies/img-7.png' %}" alt="" class="avatar-xs view-companylogo">
                                        </div>
                                    </div>
                                    <div class="mt-3">
                                        <h5 class="view-title">Variable Name</h5>
                                        <div class="hstack gap-3 mb-3">
                                            <span class="text-muted"><i class="ri-building-line me-1 align-bottom"></i> <span class="view-companyname">Sergio Troche</span></span>
                                            <span class="text-muted"><i class="ri-map-pin-2-line me-1 align-bottom"></i> <span class="view-location">United Kingdom</span></span>
                                        </div>
                                        <p class="text-muted view-desc">Description</p>
                                        <div class="py-3 border border-dashed border-start-0 border-end-0 mt-4">
                                            <div class="row">
                                                <div class="col-lg-4 col-sm-6">
                                                    <div>
                                                        <p class="mb-2 text-uppercase fw-medium fs-12 text-muted">Variable Type</p>
                                                        <h5 class="fs-14 mb-0 view-type">Full Time</h5>
                                                    </div>
                                                </div>
                                                <div class="col-lg-4 col-sm-6">
                                                    <div>
                                                        <p class="mb-2 text-uppercase fw-medium fs-12 text-muted">Created Date</p>
                                                        <h5 class="fs-14 mb-0 view-postdate">15 Sep, 2022</h5>
                                                    </div>
                                                </div>
                                                <div class="col-lg-4 col-sm-6">
                                                    <div>
                                                        <p class="mb-2 text-uppercase fw-medium fs-12 text-muted">Experience</p>
                                                        <h5 class="fs-14 mb-0 view-experience">0 - 5 Year</h5>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>

                                    <div class="mt-4">
                                        <h5 class="mb-3">Application  Summary</h5>

                                        <div>
                                            <div id="simple_dount_chart" data-colors='["--vz-info", "--vz-primary", "--vz-danger", "--vz-danger", "--vz-info"]' class="apex-charts" dir="ltr"></div>
                                        </div>
                                    </div>
                                    <div class="mt-4">
                                        <button type="button" class="btn btn-success w-100">Apply Now</button>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>

                </div>
                <!-- container-fluid -->
            </div>
            <!-- End Page-content -->

            <div class="modal fade" id="CreateVariableModal" tabindex="-1" aria-labelledby="exampleModalLabel" aria-hidden="true">
                <div class="modal-dialog modal-dialog-centered modal-lg">
                    <div class="modal-content border-0">
                        <form id="createvariable-form" autocomplete="off" class="needs-validation" novalidate>
                            <div class="modal-body">
                                <input type="hidden" id="variable-id-field" />
                                <div class="row g-3">
                                    <div class="col-lg-12">
                                        <div class="px-1 pt-1">
                                            <div class="modal-team-cover position-relative mb-0 mt-n4 mx-n4 rounded-top overflow-hidden">
                                                <!-- You can add an image related to the variable here -->
                                                <img src="{% static 'images/variable_image.jpg' %}" alt="" id="modal-cover-img" class="img-fluid">
            
                                                <div class="d-flex position-absolute start-0 end-0 top-0 p-3">
                                                    <div class="flex-grow-1">
                                                        <h5 class="modal-title text-white" id="exampleModalLabel">Create New Variable</h5>
                                                    </div>
                                                    <div class="flex-shrink-0">
                                                        <div class="d-flex gap-3 align-items-center">
                                                            <div>
                                                                <!-- You can allow the user to select an image for the variable -->
                                                                <label for="cover-image-input" class="mb-0" data-bs-toggle="tooltip" data-bs-placement="top" title="Select Image">
                                                                    <div class="avatar-xs">
                                                                        <div class="avatar-title bg-light border rounded-circle text-muted cursor-pointer">
                                                                            <i class="ri-image-fill"></i>
                                                                        </div>
                                                                    </div>
                                                                </label>
                                                                <input class="form-control d-none" value="" id="cover-image-input" type="file" accept="image/png, image/gif, image/jpeg">
                                                            </div>
                                                            <button type="button" class="btn-close btn-close-white" id="close-variableModal" data-bs-dismiss="modal" aria-label="Close"></button>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                        <div class="text-center mb-4 mt-n5 pt-2">
                                            <div class="position-relative d-inline-block">
                                                <div class="position-absolute bottom-0 end-0">
                                                    <!-- You can allow the user to select a logo for the variable -->
                                                    <label for="variablelogo-image-input" class="mb-0" data-bs-toggle="tooltip" data-bs-placement="right" title="Select Image">
                                                        <div class="avatar-xs cursor-pointer">
                                                            <div class="avatar-title bg-light border rounded-circle text-muted">
                                                                <i class="ri-image-fill"></i>
                                                            </div>
                                                        </div>
                                                    </label>
                                                    <input class="form-control d-none" value="" id="variablelogo-image-input" type="file" accept="image/png, image/gif, image/jpeg">
                                                </div>
                                                <div class="avatar-lg p-1">
                                                    <div class="avatar-title bg-light rounded-circle">
                                                        <!-- You can display the variable's logo here -->
                                                        <img src="{% static 'images/variable_logo.jpg' %}" id="variablelogo-img" class="avatar-md rounded-circle object-fit-cover" />
                                                    </div>
                                                </div>
                                            </div>
                                            <h5 class="fs-13 mt-3">Variable Logo</h5>
                                        </div>
                                        <div>
                                            <label for="variable-name-field" class="form-label">Variable Name</label>
                                            <input type="text" id="variable-name-field" class="form-control" placeholder="Enter variable name" required />
                                            <div class="invalid-feedback">Please enter a variable name.</div>
                                        </div>
                                    </div>
                                    <div class="col-lg-6">
                                        <div>
                                            <label for="variable-product-field" class="form-label">Associated Product</label>
                                            <select class="form-select" id="variable-product-field" required>
                                                <option value="Product 1">Product 1</option>
                                                <option value="Product 2">Product 2</option>
                                                <!-- You can load available products dynamically from your database -->
                                            </select>
                                            <div class="invalid-feedback">Please select the associated product for the variable.</div>
                                        </div>
                                    </div>
                                    <div class="col-lg-6">
                                        <div>
                                            <label for="variable-type-field" class="form-label">Variable Type</label>
                                            <select class="form-select" id="variable-type-field" required>
                                                <option value="Endogenous">Endogenous</option>
                                                <option value="Exogenous">Exogenous</option>
                                                <!-- Add more variable type options as needed -->
                                            </select>
                                            <div class="invalid-feedback">Please select a variable type.</div>
                                        </div>
                                    </div>
                                    <div class="col-lg-6">
                                        <div>
                                            <label for="variable-area-field" class="form-label">Variable Area</label>
                                            <select class="form-select" id="variable-area-field" required>
                                                <option value="Production">Production</option>
                                                <option value="Marketing">Marketing</option>
                                                <!-- Add more variable area options as needed -->
                                            </select>
                                            <div class="invalid-feedback">Please select a variable area.</div>
                                        </div>
                                    </div>
                                    <div class="col-lg-4">
                                        <div>
                                            <label for="variable-experience-field" class="form-label">Experience</label>
                                            <input type="text" id="variable-experience-field" class="form-control" placeholder="Enter experience" required />
                                            <div class="invalid-feedback">Please enter the required experience for the variable.</div>
                                        </div>
                                    </div>
                                    <div class="col-lg-4">
                                        <div>
                                            <label for="variable-location-field" class="form-label">Location</label>
                                            <input type="text" id="variable-location-field" class="form-control" placeholder="Enter location" required />
                                            <div class="invalid-feedback">Please enter the location for the variable.</div>
                                        </div>
                                    </div>
                                    <div class="col-lg-4">
                                        <div>
                                            <label for="variable-salary-field" class="form-label">Salary</label>
                                            <input type="number" id="variable-salary-field" class="form-control" placeholder="Enter salary" />
                                        </div>
                                    </div>
                                    <div class="col-lg-12">
                                        <div>
                                            <label for="variable-tags-field" class="form-label">Tags</label>
                                            <input class="form-control" id="variable-tags-field" data-choices data-choices-text-unique-true type="text" value="Simulation, Probability" />
                                        </div>
                                    </div>
                                    <div class="col-lg-12">
                                        <div>
                                            <label for="variable-description-field" class="form-label">Description</label>
                                            <textarea class="form-control" id="variable-description-field" rows="3" placeholder="Enter description" required></textarea>
                                            <div class="invalid-feedback">Please enter a description for the variable.</div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <div class="modal-footer">
                                <div class="hstack gap-2 justify-content-end">
                                    <button type="button" class="btn btn-light" data-bs-dismiss="modal">Close</button>
                                    <button type="submit" class="btn btn-success" id="add-variable-btn">Add Variable</button>
                                </div>
                            </div>
                        </form>
                    </div>
                </div>
            </div>
            <!-- End of Add Variable Modal -->
            

            {% block footer %}
            {% include "partials/footer.html" %}
            {% endblock footer %}
        </div>
        <!-- end main content-->
                   

                  
{% endblock content %}

{% block extra_js %}
        <!-- apexcharts -->
        <script src="{% static 'libs/apexcharts/dist/apexcharts.min.js' %}"></script>
        <script src="{% static 'js/pages/job-list.init.js' %}"></script>
{% endblock extra_js %}